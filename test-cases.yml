---
- summary: |
    Проверка корректного отображения сайта на разных браузерах
  requirement: |
    Сайт должен быть протестирован на совместимость с последними версиями браузеров.
  prerequisites: |
    Установлены и обновлены разные браузеры: Chrome, Firefox, Edge.
    Пользователь авторизован
  test-data: |
    empty
  steps:
    - Открыть сайт через Chrome. Посмотреть отображение лобби, написать что-нибудь в чат, пощелкать вкладки, создать новую игру с ботом, написать что-нибудь в редакторе кода.
    - Открыть сайт через Firefox. Посмотреть отображение лобби, написать что-нибудь в чат, пощелкать вкладки, создать новую игру с ботом, написать что-нибудь в редакторе кода.
    - Открыть сайт через Edge. Посмотреть отображение лобби, написать что-нибудь в чат, пощелкать вкладки, создать новую игру с ботом, написать что-нибудь в редакторе кода.
  expected-result: |
    Сайт корректно отображается через все браузеры, верстка не едет, сильных различий отображения через разные браузеры нет.
    
- summary: |
   Проверка корректной игры неавторизованного пользователя
  requirement: |
    У неавторизованного пользователя есть возможность сыграть с ботом
  prerequisites:
    Пользователь не  авторизован
  test-data: |
    empty
  steps:
    - Зайти на главную страницу 
    - Нажать кнопку "try simple battle"
  expected-result: |
    Пользователя перекидывает на загрузку игры, а потом и на игру с ботом.
    
- summary: |
    Проверка корректной регистрации по имейлу
  requirement: |
    Пользователи могут регистироваться на сайте
  prerequisites:
    Открыта главная страница
    Пользователь не авторизован
  test-data: |
    Nickname = Тестовое1, Email = какой-нибудь валидный имейл, Password = 123456
  steps:
    - Нажать кнопку "sign up" (происходит переход на страницу регистрации)
    - Ввести Nickname
    - Ввести Email
    - Ввести пароль
    - Подтвердить пароль
    - Нажать кнопку "submit"
  expected-result: |
    Новый пользователь зарегистрирован
    
- summary: |
    Проверка, что на один email нельзя зарегистировать больше одного пользователя
  requirement: |
    Пользователи могут регистироваться на сайте
  prerequisites:
    Открыта главная страница
    Пользователь не авторизован
  test-data: |
     Nickname = Тестовое2, Email = какой-нибудь валидный имейл, на который уже есть регистрация, Password = 123456
  steps:
    - Нажать кнопку "sign up" (происходит переход на страницу регистрации)
    - Ввести Nickname
    - Ввести Email
    - Ввести пароль
    - Подтвердить пароль
    - Нажать кнопку "submit"
  expected-result: |
    Пользователь не зарегистирован. Показывается сообщение, что email занят
    
- summary: |
    Проверка регистрации через учетку Github
  requirement: |
    Пользователи могут регистироваться на сайте
  prerequisites:
    Открыта главная страница
    Прльзователь не авторизован
    Существует учетка в Githab
  test-data: |
    данные учетки Github
  steps:
    - Нажать кнопку "sign up" (происходит переход на страницу регистрации)
    - Выбрать опцию "sign in with Github" (происходит редирект на страницу авторизации в Github)
    - Ввести данные учетки
    - Нажать "sign in"
  expected-result: |
    Происходит переход обратно в codebattle. Пользователь автрризован, юзернейм совпадает с тем, что на Github
    
- summary: |
    Проверка корректной авторизации существующего пользователя через email
  requirement: |
    Пользователи могут регистироваться на сайте
  prerequisites:
    Открыта главная страница
    Прльзователь не авторизован
  test-data: |
    Email = валидный имейл, на который уже есть регистрация, Password = 123456
  steps:
    - Нажать кнопку "sign in" (происходит переход на страницу авторизации)
    - Ввести Email
    - Ввести пароль
    - Нажать "submit"
  expected-result: |
    Пользователь авторизован
    
- summary: |
    Проверка некорректной авторизации существующего пользователя через email с неправильным паролем
  requirement: |
    Пользователи могут регистироваться на сайте
  prerequisites:
    Открыта главная страница
    Прльзователь не авторизован
  test-data: |
    Email = валидный имейл, на который уже есть регистрация, Password = 000000
  steps:
    - Нажать кнопку "sign in" (происходит переход на страницу авторизации)
    - Ввести Email
    - Ввести пароль
    - Нажать "submit"
  expected-result: |
    Пользователь не авторизован, появляется сообщение о неправильном пароле
    
- summary: |
    Проверка создания игры с ботом
  requirement: |
    Пользователи могут играть с ботами
  prerequisites: |
    Пользователь авторизован
    Открыта главная страница
  test-data: |
    empty
  steps:
    - Нажать на кнопку "Create a game"
    - Выбрать "With a bot"
    - Нажать "Create battle"
  expected-result: |
    Загружается игра с ботом, запускается таймер, видно редактор, задание, чат
    
- summary: |
    Проверка создания игры с другом
  requirement: |
    Пользователи могут играть с другими пользователями
  prerequisites: |
    Пользователь авторизован
    Открыта главная страница
  test-data: |
    empty
  steps:
    - Нажать на кнопку "Create a game"
    - Выбрать "With a friend"
    - Выбрать соперника в выпадающем списке "Choose opponent"
    - Нажать "Create Invite"
  expected-result: |
    Отображается единичка в счетчике у иконки мечей сверху. Игра начинается, когда оппонент примет приглашение.
    
- summary: |
    Проверка создания игры с другим пользователем в лобби
  requirement: |
    Пользователи могут играть с другими пользователямии
    Пользователи могут приглашать в игру других пользователей по ссылке
    Пользователи могут присоединяться к игре по ссылке
  prerequisites: |
    Пользователь авторизован
    Открыта главная страница
  test-data: |
    empty
  steps:
    - Нажать на кнопку "Create a game"
    - Выбрать "With other users"
    - Нажать "Create Battle"
  expected-result: |
    В лобби отображается созданная игра. Другие пользователи могут присоединиться. Можно кликом скопировать ссылку на игру и отправить другому пользователю, чтобы тот присоединился.
    
- summary: |
    Проверка отправки сообщения в чате на главной странице
  requirement: |
    В игре есть чат, в котором общаются зарегистрированные пользователи
  prerequisites: |
    Пользователь авторизован
    Открыта главная страница (происходит редирект на https://codebattle.hexlet.io/#lobby)
  test-data: |
    empty
  steps:
    - В поле ввода чата написать "Привет"
    - Выбрать любой эмодзи
    - Нажать кнопку «Send» или клавишу enter на клавиатуре
  expected-result: |
    Сообщение "Привет" с выбранном эмодзи отобразилось в чате. 
    В чате видно логин авторизованного пользователя, который отправил сообщение
    
- summary: |
    Проверка отправки сообщения в чате на странице соревнования
  requirement: |
    В игре есть чат, в котором общаются зарегистрированные пользователи
  prerequisites: |
    Пользователь авторизован
    Начато любое соревнование
  test-data: |
    empty
  steps:
    - В поле ввода чата написать "Привет"
    - Выбрать любой эмодзи
    - Нажать кнопку «Send» или клавишу enter на клавиатуре
  expected-result: |
    Сообщение "Привет" с выбранном эмодзи отобразилось в чате. 
    В чате видно логин авторизованного пользователя, который отправил сообщение
    
- summary: |
    Проверка, что при верном решении задачи быстрее противника пользователю присуждается победа
  requirement: |
    Пользователи могут играть с другими пользователями
    Пользователи получают очки, на основе которых строится рейтинг за неделю, месяц и за все время
  prerequisites:
    Два пользователя авторизованы, между ними начата игра
  test-data: |
    empty
  steps:
    - Один пользователь пишет верное решение задачи
    - Второй бездействует
  expected-result: |
    Первому пользователю показано окно, где сказано, что он выиграл. Второму - что проиграл. 
    У первого пользователя в статистике "won" стало на один больше. У второго в статистике "lost" стало на одно больше  

- summary: |
    Проверка создания игры с заданнами параметрами
  requirement: |
    Можно выбирать различные задачи из списка с различными уровнями сложности
    Пользователь могут играть с ботами
    В соревнованиях есть таймер, который может быть настроен самими пользователями
    У задач есть теги, которые должны помогать сориентироваться в них
  prerequisites:
    Пользователь авторизован
  test-data: |
    empty
  steps:
    - Нажать кнопку "create a game"
    - Выбрать (оставить) одну звезду
    - Выбрать "with a bot"
    - Выставить таймер на 3 минуты
    - Выбрать теги "strings" "math"
    - Начать игру
  expected-result: |
    Начата игра с заданными параметрами
    
- summary: |
    Проверка, что игра завершается по истечении таймера без победителей
  requirement: |
    В соревнованиях есть таймер, который может быть настроен самими пользователями
  prerequisites:
    Два пользователя авторизованы. Один из них создал игру с таймером на 3 минуты, к которой можно присоединиться
  test-data: |
    empty
  steps:
    - Второй пользователь присоединяется к игре
    - Оба ждут 3 минуты, не решая задачу
  expected-result: |
    Игра завершается по истечении таймера. Победа никому не присуждается
    
- summary: |
    Проверка наблюдения за ходом текущей игры в качестве зрителя
  requirement: |
    Другие пользователи могут следить за ходом игры
  prerequisites:
    Пользователь авторизован
    Открыта главная страница
  test-data: |
    empty
  steps:
    - В лобби нажать на кнопку "Show" у активной в данной момент игры
  expected-result: |
    Пользователь попадает на страницу игры и видеть изменения в режиме реального времени
    
- summary: |
    Проверка просмотра завершенных игр
  requirement: |
    Завершенная игра доступна в записи. Редактор для ввода кода выглядит как проигрыватель
    Зарегистрированному пользователю доступен просмотр завершенных игр на вкладке "Completed games"
  prerequisites: |
    Пользователь авторизован
    Открыта главная страница
  test-data: |
    empty
  steps:
    - Нажать на вкладку "Completed games"
    - У первой игры в списке нажать "show"
  expected-result: |
    Происходит переход на страницу завершенной игры. Отображаются два редактора, задание, чат. Можно нажать кнопку проигрывателя, чтобы воспроизвести игру
    
- summary: |
    Проверка выбора языка программирования в игре
  requirement: |
    Игра поддерживает различные языки программирования
  prerequisites: |
    Пользователь авторизован
    Открыта главная страница
  test-data: |
    empty
  steps:
    - Нажать на кнопку "Create a Game"
    - Выбрать "With a bot" 
    - Выбрать любые другие параметры
    - Начать игру
    - Нажать на выпадающий список языков программирования
    - Поочередно повыбирать различные языки программирования
  expected-result: |
    В окне редактора подготовленный текст меняется в соответсвии с языком программирования
    
- summary: |
    Проверка просмотра и навигации в рейтинговой таблице
  requirement: |
    Пользователи получают очки, на основе которых строится рейтинг за неделю, месяц и за все время
  prerequisites:
    Пользователь авторизован
    Открыта главная страница
  test-data: |
    empty
  steps:
    - Нажать "TOP list" рядом с таблицей лобби
    - Пощелкать вкладки weekly, monthly, total
    - Пощелкать страницы таблицы
    - Пощелкать стрелочки для сортировки в таблице
    - Выполнить поиск по своему юзернейму
  expected-result: |
    Отображается рейтинговая таблица со статистикой. Данные меняются по вкладкам. Сортировка меняется, если нажимать стрелочки. Можно найти пользователя по юзернейму
